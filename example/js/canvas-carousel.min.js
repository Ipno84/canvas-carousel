!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["canvas-carousel"]=e():t["canvas-carousel"]=e()}(self,(()=>(()=>{"use strict";var t={607:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasCarousel=void 0;var i=function(){function t(t){this._canvas=null,this._context=null,this._options={selector:"",imagesPath:[]},this._currentIndex=0,this._resizeObserver=null,this._imagesCollection=[],this.touch=navigator.maxTouchPoints>0,this.coors={},this.canvasPosition={deltaX:0},this.parentWidth=void 0,this.resizeTimeout=null,this.oldCanvasWidth=void 0,this.onResize=this.onResize.bind(this),this.onActionStart=this.onActionStart.bind(this),this.onActionEnd=this.onActionEnd.bind(this),this.onElementLeave=this.onElementLeave.bind(this),this.onActionMove=this.onActionMove.bind(this),this._options=t,this.onInit()}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this._currentIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeObserver",{get:function(){return this._resizeObserver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imagesCollection",{get:function(){return this._imagesCollection},enumerable:!1,configurable:!0}),t.prototype.handleCanvasAssignment=function(){this.options.node&&this.options.node instanceof HTMLCanvasElement?this._canvas=this.options.node:this.options.selector&&(this._canvas=document.querySelector(this.options.selector))},t.prototype.onInit=function(){var t,e,i;this.handleCanvasAssignment(),this._context=null===(t=this.canvas)||void 0===t?void 0:t.getContext("2d"),this.context&&(this.context.imageSmoothingEnabled=!0),this.setupSize(),this.prepareImages(),(null===(e=this.canvas)||void 0===e?void 0:e.parentElement)&&(this._resizeObserver=new ResizeObserver(this.onResize),null===(i=this.resizeObserver)||void 0===i||i.observe(this.canvas.parentElement))},t.prototype.onResize=function(){var t,e,i,n=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.options.aspectRatio&&!this.oldCanvasWidth&&(null===(t=this.canvas)||void 0===t?void 0:t.width)&&(this.oldCanvasWidth=null===(e=this.canvas)||void 0===e?void 0:e.width),this.touch=navigator.maxTouchPoints>0,this.resizeTimeout=setTimeout((function(){n.addListeners(),n.setupSize(),n.handleCanvasReduction(),n.drawImages()}),null!==(i=this.options.resizeTimeoutReaction)&&void 0!==i?i:300)},t.prototype.handleCanvasReduction=function(){if(this.options.aspectRatio&&this.canvas&&this.oldCanvasWidth){var t=100*(this.oldCanvasWidth-this.canvas.width)/this.oldCanvasWidth/100;this.canvasPosition.deltaX||(this.canvasPosition.deltaX=0),this.canvasPosition.deltaX=this.canvasPosition.deltaX-this.canvasPosition.deltaX*t,this.oldCanvasWidth=void 0}},t.prototype.onActionStart=function(t){var e,i,n,o,s;t.preventDefault(),this.canvasRect=null===(e=this.canvas)||void 0===e?void 0:e.getBoundingClientRect();var a=this.touch&&t instanceof TouchEvent?t.touches[0]:t;this.coors.clientX=a.clientX-(null!==(n=null===(i=this.canvasRect)||void 0===i?void 0:i.left)&&void 0!==n?n:0)-(null!==(o=this.canvasPosition.deltaX)&&void 0!==o?o:0),null===(s=this.canvas)||void 0===s||s.addEventListener(this.touch?"touchmove":"mousemove",this.onActionMove)},t.prototype.onActionEnd=function(){var t;null===(t=this.canvas)||void 0===t||t.removeEventListener(this.touch?"touchmove":"mousemove",this.onActionMove)},t.prototype.onElementLeave=function(){var t,e;null===(t=this.canvas)||void 0===t||t.dispatchEvent(new Event("mouseup")),null===(e=this.canvas)||void 0===e||e.dispatchEvent(new Event("touchend"))},t.prototype.onActionMove=function(t){var e,i,n,o,s;t.preventDefault();var a=-(null!==(i=null===(e=this.canvas)||void 0===e?void 0:e.width)&&void 0!==i?i:0)*(this.options.imagesPath.length-1),h=this.touch&&t instanceof TouchEvent?t.touches[0]:t;this.coors.x=h.clientX-(null!==(o=null===(n=this.canvasRect)||void 0===n?void 0:n.left)&&void 0!==o?o:0),this.canvasPosition.deltaX=this.coors.x-(null!==(s=this.coors.clientX)&&void 0!==s?s:0),this.canvasPosition.deltaX>0?this.canvasPosition.deltaX=0:this.canvasPosition.deltaX<a&&(this.canvasPosition.deltaX=a),this.setupCurrentIndex(),this.drawImages()},t.prototype.setupCurrentIndex=function(){if(this.canvas&&void 0!==this.canvasPosition.deltaX){var t=Math.round((Math.abs(this.canvasPosition.deltaX)+this.canvas.width)/this.canvas.width)-1;t!==this.currentIndex&&(this._currentIndex=t)}},t.prototype.addListeners=function(){if(this.canvas){var t=this.touch?"touchstart":"mousedown",e=this.touch?"touchend":"mouseup",i=this.touch?"touchcancel":"mouseleave";this.canvas.removeEventListener("touchstart",this.onActionStart),this.canvas.removeEventListener("mousedown",this.onActionStart),this.canvas.removeEventListener("touchend",this.onActionEnd),this.canvas.removeEventListener("mouseup",this.onActionEnd),this.canvas.removeEventListener("touchcancel",this.onElementLeave),this.canvas.removeEventListener("mouseleave",this.onElementLeave),this.canvas.addEventListener(t,this.onActionStart),this.canvas.addEventListener(e,this.onActionEnd),this.canvas.addEventListener(i,this.onElementLeave)}},t.prototype.innerDimensions=function(t){var e=getComputedStyle(t),i=t.clientWidth,n=t.clientHeight;return{height:n-=Number.parseFloat(e.paddingTop)+Number.parseFloat(e.paddingBottom),width:i-=Number.parseFloat(e.paddingLeft)+Number.parseFloat(e.paddingRight)}},t.prototype.setupSize=function(){if(this.canvas&&this.options.aspectRatio){var t=this.canvas.parentNode;t&&(this.parentWidth=this.innerDimensions(t).width,this.canvas.width=this.parentWidth,this.canvas.height=this.parentWidth*this.options.aspectRatio)}else this.canvas&&this.options.canvasHeight&&this.options.canvasWidth&&(this.canvas.width=this.options.canvasWidth,this.canvas.height=this.options.canvasHeight)},t.prototype.prepareImages=function(){var t=this;this.options.imagesPath.forEach((function(e,i){var n=new Image;n.src=e,n.onload=function(){t._imagesCollection[i]=n,t.drawImages()}}))},t.prototype.getNormalizedImageSizes=function(t){if(this.canvas){var e=t.width/t.height;return e>1?{width:this.canvas.width,height:this.canvas.width/e}:{width:this.canvas.height*e,height:this.canvas.height}}return{width:0,height:0}},t.prototype.getDeltas=function(t,e){return this.canvas?{x:(this.canvas.width-t)/2,y:(this.canvas.height-e)/2}:{x:0,y:0}},t.prototype.goToIndex=function(t){if(this.canvas&&t>=0&&t<this.options.imagesPath.length){var e=0-this.canvas.width*t;this.canvasPosition.deltaX=e,this.drawImages(),this.setupCurrentIndex()}},t.prototype.goToNext=function(){this.goToIndex(this.currentIndex+1)},t.prototype.goToPrev=function(){this.goToIndex(this.currentIndex-1)},t.prototype.goToFirst=function(){this.goToIndex(0)},t.prototype.goToLast=function(){this.goToIndex(this.options.imagesPath.length-1)},t.prototype.drawImages=function(){var t,e,i,n,o,s=this;null===(t=this.context)||void 0===t||t.clearRect(0,0,null!==(i=null===(e=this.canvas)||void 0===e?void 0:e.width)&&void 0!==i?i:0,null!==(o=null===(n=this.canvas)||void 0===n?void 0:n.height)&&void 0!==o?o:0),this._imagesCollection.forEach((function(t,e){var i,n;if(s.canvas){var o=s.getNormalizedImageSizes(t),a=o.width,h=o.height,c=s.getDeltas(a,h),r=c.x,v=c.y;null===(i=s.context)||void 0===i||i.drawImage(t,s.canvas.width*e+r+(null!==(n=s.canvasPosition.deltaX)&&void 0!==n?n:0),v,a,h)}}))},t}();e.CanvasCarousel=i},221:function(t,e,i){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=i(607),s=(document.querySelector("#carousel"),{selector:"#carousel",imagesPath:["http://challenge.publitas.com/images/0.jpg","http://challenge.publitas.com/images/1.jpg","http://challenge.publitas.com/images/2.jpg","http://challenge.publitas.com/images/3.jpg"],resizeTimeoutReaction:1}),a=(n(n({},s),{canvasWidth:200,canvasHeight:200}),n(n({},s),{aspectRatio:.6})),h=new o.CanvasCarousel(a),c=document.getElementById("next"),r=document.getElementById("prev"),v=document.getElementById("first"),d=document.getElementById("last");null==c||c.addEventListener("click",(function(t){t.preventDefault(),h.goToNext()})),null==r||r.addEventListener("click",(function(t){t.preventDefault(),h.goToPrev()})),null==v||v.addEventListener("click",(function(t){t.preventDefault(),h.goToIndex(0)})),null==d||d.addEventListener("click",(function(t){t.preventDefault(),h.goToIndex(h.options.imagesPath.length-1)}))}},e={};return function i(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}(221)})()));
//# sourceMappingURL=canvas-carousel.min.js.map